{"ast":null,"code":"import _slicedToArray from\"/home/kim/GitHub/Portfolio/react/netflix-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useContext}from'react';import{FirebaseContext}from'../context/firebase';export default function useAuthListener(){var _useState=useState(JSON.parse(localStorage.getItem('authUser'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useContext=useContext(FirebaseContext),firebase=_useContext.firebase;useEffect(function(){var listner=firebase.auth().onAuthStateChanged(function(authUser){if(authUser){localStorage.setItem('authUser',JSON.stringify(authUser));setUser(authUser);}else{localStorage.removeItem('authUser');setUser(null);}});return function(){return listner();};},[]);return{user:user};}","map":{"version":3,"sources":["/home/kim/GitHub/Portfolio/react/netflix-react/src/hooks/use-auth-listener.js"],"names":["useState","useEffect","useContext","FirebaseContext","useAuthListener","JSON","parse","localStorage","getItem","user","setUser","firebase","listner","auth","onAuthStateChanged","authUser","setItem","stringify","removeItem"],"mappings":"qKAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,OAASC,eAAT,KAAgC,qBAAhC,CAEA,cAAe,SAASC,CAAAA,eAAT,EAA2B,CACxC,cAAwBJ,QAAQ,CAACK,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eACA,gBAAqBR,UAAU,CAACC,eAAD,CAA/B,CAAQQ,QAAR,aAAQA,QAAR,CAEAV,SAAS,CAAC,UAAM,CACd,GAAMW,CAAAA,OAAO,CAAGD,QAAQ,CAACE,IAAT,GAAgBC,kBAAhB,CAAmC,SAACC,QAAD,CAAc,CAC/D,GAAIA,QAAJ,CAAc,CACZR,YAAY,CAACS,OAAb,CAAqB,UAArB,CAAiCX,IAAI,CAACY,SAAL,CAAeF,QAAf,CAAjC,EACAL,OAAO,CAACK,QAAD,CAAP,CACD,CAHD,IAGO,CACLR,YAAY,CAACW,UAAb,CAAwB,UAAxB,EACAR,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CARe,CAAhB,CAUA,MAAO,kBAAME,CAAAA,OAAO,EAAb,EAAP,CACD,CAZQ,CAYN,EAZM,CAAT,CAcA,MAAO,CAAEH,IAAI,CAAJA,IAAF,CAAP,CACD","sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { FirebaseContext } from '../context/firebase';\n\nexport default function useAuthListener() {\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('authUser')));\n  const { firebase } = useContext(FirebaseContext);\n\n  useEffect(() => {\n    const listner = firebase.auth().onAuthStateChanged((authUser) => {\n      if (authUser) {\n        localStorage.setItem('authUser', JSON.stringify(authUser));\n        setUser(authUser);\n      } else {\n        localStorage.removeItem('authUser');\n        setUser(null);\n      }\n    });\n\n    return () => listner();\n  }, []);\n\n  return { user };\n}\n"]},"metadata":{},"sourceType":"module"}