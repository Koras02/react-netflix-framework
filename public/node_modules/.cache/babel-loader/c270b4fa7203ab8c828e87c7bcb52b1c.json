{"ast":null,"code":"import _slicedToArray from\"/home/kim/GitHub/Portfolio/react/movie-netflix-framework/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react-hooks/exhaustive-deps */import{useState,useEffect,useContext}from'react';import{FirebaseContext}from'../context/firebase';export default function useAuthListener(){var _useState=useState(JSON.parse(localStorage.getItem('authUser'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useContext=useContext(FirebaseContext),firebase=_useContext.firebase;useEffect(function(){var listener=firebase.auth().onAuthStateChanged(function(authUser){// 로그인시 유저로 추가s\nif(authUser){localStorage.setItem('authUser',JSON.stringify(authUser));setUser(authUser);// 나갈시 삭제 \n}else{localStorage.removeItem('authUser');setUser(null);}});return function(){return listener();};},[]);return{user:user};}","map":{"version":3,"sources":["/home/kim/GitHub/Portfolio/react/movie-netflix-framework/client/src/hooks/use-auth-listener.js"],"names":["useState","useEffect","useContext","FirebaseContext","useAuthListener","JSON","parse","localStorage","getItem","user","setUser","firebase","listener","auth","onAuthStateChanged","authUser","setItem","stringify","removeItem"],"mappings":"+KAAA,gDACA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,OAASC,eAAT,KAAgC,qBAAhC,CAEA,cAAe,SAASC,CAAAA,eAAT,EAA2B,eAChBJ,QAAQ,CAACK,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAD,CADQ,wCACjCC,IADiC,eAC3BC,OAD2B,+BAEnBR,UAAU,CAACC,eAAD,CAFS,CAEhCQ,QAFgC,aAEhCA,QAFgC,CAKxCV,SAAS,CAAC,UAAM,CACd,GAAMW,CAAAA,QAAQ,CAAGD,QAAQ,CAACE,IAAT,GAAgBC,kBAAhB,CAAmC,SAACC,QAAD,CAAc,CAChE;AAEA,GAAIA,QAAJ,CAAc,CACZR,YAAY,CAACS,OAAb,CAAqB,UAArB,CAAiCX,IAAI,CAACY,SAAL,CAAeF,QAAf,CAAjC,EACAL,OAAO,CAACK,QAAD,CAAP,CACD;AACA,CAJD,IAIO,CACLR,YAAY,CAACW,UAAb,CAAwB,UAAxB,EACAR,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CAXgB,CAAjB,CAaA,MAAO,kBAAME,CAAAA,QAAQ,EAAd,EAAP,CACD,CAfQ,CAeN,EAfM,CAAT,CAiBA,MAAO,CAAEH,IAAI,CAAJA,IAAF,CAAP,CACD","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { useState, useEffect, useContext } from 'react';\nimport { FirebaseContext } from '../context/firebase';\n\nexport default function useAuthListener() {\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('authUser')));\n  const { firebase } = useContext(FirebaseContext);\n\n  \n  useEffect(() => {\n    const listener = firebase.auth().onAuthStateChanged((authUser) => {\n      // 로그인시 유저로 추가s\n      \n      if (authUser) {\n        localStorage.setItem('authUser', JSON.stringify(authUser));\n        setUser(authUser);\n       // 나갈시 삭제 \n      } else {\n        localStorage.removeItem('authUser');\n        setUser(null);\n      }\n    });\n\n    return () => listener();\n  }, []);\n\n  return { user };\n}\n"]},"metadata":{},"sourceType":"module"}